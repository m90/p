(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.Promise=t(e.Promise)}})(this,function(e){function t(e){return typeof e==="undefined"}function n(e){return Object.prototype.toString.call(e)==="[object Function]"}function i(e){return Object.prototype.toString.call(e)==="[object Object]"}function r(e){var t=[];for(var n=0;n<e.length;n++){if(!!e[n]){t.push(e[n])}}return t}function o(e,t,n){var i=false;try{e(function(e){if(i)return;i=true;t(e)},function(e){if(i)return;i=true;n(e)})}catch(r){if(i)return;i=true;n(r)}}var f={PENDING:0,FULFILLED:1,REJECTED:2};var u=function(){if(this.process&&n(this.process.nextTick)){return this.process.nextTick}else if(this.setImmediate){return this.setImmediate}else{return function(e){setTimeout(e,0)}}}();function c(e){if(!i(this)){return new c(e)}var r=this,s=n(e)?null:e,l=n(e)||t(e)?f.PENDING:f.FULFILLED,h=null,a=[];function L(e){if(l===f.PENDING){a.push(e)}else{u(function(){var t=l===f.FULFILLED?e.onFulfilled:e.onRejected;if(!n(t)){if(l===f.FULFILLED){e.resolve(s)}else{e.reject(h)}}else{var i;try{i=t(l===f.FULFILLED?s:h)}catch(r){e.reject(r);return}e.resolve(i)}})}}function E(e){if(e===r){p(new TypeError("Cannot resolve with self"))}if(l===f.REJECTED)return;try{if(i(e)||n(e)){var t=e.then;if(n(t)){o(t.bind(e),E,p);return}}l=f.FULFILLED;s=e;F()}catch(u){p(u)}}function p(e){if(l===f.FULFILLED)return;l=f.REJECTED;h=e;F()}function F(){while(a.length){L(a.shift())}}this.then=function(e,t){return new c(function(n,i){L({onFulfilled:e,onRejected:t,resolve:n,reject:i})})};if(n(e)){o(e,E,p)}else if(t(e)){this.resolve=function(){E.apply(this,[].slice.call(arguments));return this};this.reject=function(){p.apply(this,[].slice.call(arguments));return this}}else{E(s)}}c.all=function(e){return new c(function(t,o){var f=[];function u(c,s){if(i(s)&&n(s.then)){s.then(function(e){u(c,e)},o)}else{f[c]=s;if(r(f).length===e.length){t(f)}}}for(var c=0;c<e.length;c++){u(c,e[c])}})};c.noConflict=function(){this.Promise=e;return c}.bind(this);return c});