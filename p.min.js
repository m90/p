(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.Promise=t(e.Promise)}})(this,function(e){function t(e){return typeof e==="undefined"}function n(e){return Object.prototype.toString.call(e)==="[object Function]"}function i(e){return Object.prototype.toString.call(e)==="[object Object]"}function r(e){var t=[];for(var n=0;n<e.length;n++){if(!!e[n]){t.push(e[n])}}return t}function o(e,t,n){var i=false;try{e(function(e){if(i)return;i=true;t(e)},function(e){if(i)return;i=true;n(e)})}catch(r){if(i)return;i=true;n(r)}}var u={PENDING:0,FULFILLED:1,REJECTED:2};var f=function(){if(this.process&&n(this.process.nextTick)){return this.process.nextTick}else if(this.setImmediate){return this.setImmediate}else{return function(e){setTimeout(e,0)}}}();function c(e){if(!i(this)){return new c(e)}var r=this,s=n(e)?null:e,l=n(e)||t(e)?u.PENDING:u.FULFILLED,h=null,a=[];function L(e){if(l===u.PENDING){a.push(e)}else{f(function(){var t=l===u.FULFILLED?e.onFulfilled:e.onRejected;if(!n(t)){if(l===u.FULFILLED){e.resolve(s)}else{e.reject(h)}}else{var i;try{i=t(l===u.FULFILLED?s:h)}catch(r){e.reject(r);return}e.resolve(i)}})}}function p(e){if(e===r){E(new TypeError("Cannot resolve with self"))}if(l===u.REJECTED)return;try{if(i(e)||n(e)){var t=e.then;if(n(t)){o(t.bind(e),p,E);return}}l=u.FULFILLED;s=e;F()}catch(f){E(f)}}function E(e){if(l===u.FULFILLED)return;l=u.REJECTED;h=e;F()}function F(){while(a.length){L(a.shift())}}this.then=function(e,t){return new c(function(n,i){L({onFulfilled:e,onRejected:t,resolve:n,reject:i})})};if(n(e)){o(e,p,E)}else if(t(e)){this.resolve=function(){p.apply(this,[].slice.call(arguments));return this};this.reject=function(){E.apply(this,[].slice.call(arguments));return this};this.promise=function(){return{then:this.then}}}else{p(s)}}c.all=function(e){return new c(function(t,o){var u=[];function f(c,s){if(i(s)&&n(s.then)){s.then(function(e){f(c,e)},o)}else{u[c]=s;if(r(u).length===e.length){t(u)}}}for(var c=0;c<e.length;c++){f(c,e[c])}})};c.noConflict=function(){this.Promise=e;return c}.bind(this);return c});